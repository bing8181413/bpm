<style>
    .relative {
        position: relative;
    }

    .msg_title {
        vertical-align: text-bottom;
    }

    .checked {
        /*background-color: rgb(19, 196, 165) !important;*/
        background-color: #09C !important;
    }

    .checked .msg_title {
        color: #fff;
    }

    input[type=checkbox] {
        width: 16px;
        height: 16px;
    }

    tr {
        cursor: pointer;
    }
</style>
<div class="container-fluid">
    <div class="panel panel-primary">
        <div class="panel-heading">退款管理</div>
        <div class="panel-body">
            <!--<ul class="nav nav-pills">-->
            <!--<li role="presentation" ng-class="{active:list_param.refund_type ==0}">-->
            <!--<a class="btn" ng-click="list_param.refund_type=0;getapi(1,0,1);">待处理</a>-->
            <!--</li>-->
            <!--<li role="presentation" ng-class="{active:list_param.refund_type ==1}" dropdown-->
            <!--on-toggle="toggled(open)">-->
            <!--<a class="btn" id="simple-weixin" dropdown-toggle>微信 <span class="caret"></span></a>-->
            <!--<ul class="dropdown-menu" aria-labelledby="simple-weixin">-->
            <!--<li role="menuitem">-->
            <!--<a ng-style="(list_param.refund_type==1&&list_param.refund_status==2)?-->
            <!--{'background-color': '#09C','color': '#fff'}:''" style="cursor:pointer;"-->
            <!--ng-click="list_param.refund_type=1;list_param.refund_status=2;getapi(1,1,2);">已申请</a>-->
            <!--</li>-->
            <!--<li class="divider"></li>-->
            <!--&lt;!&ndash;<li role="menuitem">&ndash;&gt;-->
            <!--&lt;!&ndash;<a ng-style="(list_param.refund_type==1&&list_param.refund_status==3)?&ndash;&gt;-->
            <!--&lt;!&ndash;{'background-color': '#13c4a5','color': '#fff'}:''" style="cursor:pointer;"&ndash;&gt;-->
            <!--&lt;!&ndash;ng-click="list_param.refund_type=1;list_param.refund_status=3;getapi(1,1,3);">退款中</a>&ndash;&gt;-->
            <!--&lt;!&ndash;</li>&ndash;&gt;-->
            <!--&lt;!&ndash;<li class="divider"></li>&ndash;&gt;-->
            <!--<li role="menuitem">-->
            <!--<a ng-style="(list_param.refund_type==1&&list_param.refund_status==4)?-->
            <!--{'background-color': '#09C','color': '#fff'}:''" style="cursor:pointer;"-->
            <!--ng-click="list_param.refund_type=1;list_param.refund_status=4;getapi(1,1,4);">退款成功</a>-->
            <!--</li>-->
            <!--</ul>-->
            <!--</li>-->
            <!--<li role="presentation" ng-class="{active:list_param.refund_type ==2}" dropdown-->
            <!--on-toggle="toggled(open)">-->
            <!--<a class="btn" id="simple-alipay" dropdown-toggle>支付宝 <span class="caret"></span></a>-->
            <!--<ul class="dropdown-menu" aria-labelledby="simple-alipay">-->
            <!--<li role="menuitem">-->
            <!--<a ng-style="(list_param.refund_type==2&&list_param.refund_status==2)?-->
            <!--{'background-color': '#09C','color': '#fff'}:''" style="cursor:pointer;"-->
            <!--ng-click="list_param.refund_type=2;list_param.refund_status=2;getapi(1,2,2);">已申请</a>-->
            <!--</li>-->
            <!--<li class="divider"></li>-->
            <!--&lt;!&ndash;<li role="menuitem">&ndash;&gt;-->
            <!--&lt;!&ndash;<a ng-style="(list_param.refund_type==2&&list_param.refund_status==3)?&ndash;&gt;-->
            <!--&lt;!&ndash;{'background-color': '#13c4a5','color': '#fff'}:''" style="cursor:pointer;"&ndash;&gt;-->
            <!--&lt;!&ndash;ng-click="list_param.refund_type=2;list_param.refund_status=3;getapi(1,2,3);">退款中</a>&ndash;&gt;-->
            <!--&lt;!&ndash;</li>&ndash;&gt;-->
            <!--&lt;!&ndash;<li class="divider"></li>&ndash;&gt;-->
            <!--<li role="menuitem">-->
            <!--<a ng-style="(list_param.refund_type==2&&list_param.refund_status==4)?-->
            <!--{'background-color': '#09C','color': '#fff'}:''" style="cursor:pointer;"-->
            <!--ng-click="list_param.refund_type=2;list_param.refund_status=4;getapi(1,2,4);">退款成功</a>-->
            <!--</li>-->
            <!--</ul>-->
            <!--</li>-->
            <!--<li role="presentation" ng-class="{active:list_param.refund_type ==3}" dropdown-->
            <!--on-toggle="toggled(open)">-->
            <!--<a class="btn" id="simple-alipay" dropdown-toggle>微信H5 <span class="caret"></span></a>-->
            <!--<ul class="dropdown-menu" aria-labelledby="simple-alipay">-->
            <!--<li role="menuitem">-->
            <!--<a ng-style="(list_param.refund_type==3&&list_param.refund_status==2)?-->
            <!--{'background-color': '#09C','color': '#fff'}:''" style="cursor:pointer;"-->
            <!--ng-click="list_param.refund_type=3;list_param.refund_status=2;getapi(1,3,2);">已申请</a>-->
            <!--</li>-->
            <!--<li class="divider"></li>-->
            <!--&lt;!&ndash;<li role="menuitem">&ndash;&gt;-->
            <!--&lt;!&ndash;<a ng-style="(list_param.refund_type==2&&list_param.refund_status==3)?&ndash;&gt;-->
            <!--&lt;!&ndash;{'background-color': '#13c4a5','color': '#fff'}:''" style="cursor:pointer;"&ndash;&gt;-->
            <!--&lt;!&ndash;ng-click="list_param.refund_type=2;list_param.refund_status=3;getapi(1,2,3);">退款中</a>&ndash;&gt;-->
            <!--&lt;!&ndash;</li>&ndash;&gt;-->
            <!--&lt;!&ndash;<li class="divider"></li>&ndash;&gt;-->
            <!--<li role="menuitem">-->
            <!--<a ng-style="(list_param.refund_type==3&&list_param.refund_status==4)?-->
            <!--{'background-color': '#09C','color': '#fff'}:''" style="cursor:pointer;"-->
            <!--ng-click="list_param.refund_type=3;list_param.refund_status=4;getapi(1,3,4);">退款成功</a>-->
            <!--</li>-->
            <!--</ul>-->
            <!--</li>-->
            <!--</ul>-->
            <!--<div style="margin-top: 15px;" ng-if="list_param.refund_status==2">-->
            <!--<div style="margin-top: 15px;">-->
            <!--<a class="btn btn-danger" ng-click="order_refund();">确认退款</a>-->
            <!--<a class="btn btn-info" ng-click="CheckAll();">全部选择</a>-->
            <!--<a class="btn btn-info" ng-click="UnCheck();">全部取消</a>-->
            <!--</div>-->
        </div>
        <div class="panel-body">
            <div class="panel">
                <ul class="nav nav-pills">
                    <li role="presentation">
                        <a class="btn">退款状态:</a>
                    </li>
                    <li role="presentation" ng-class="{active:list_param.refund_status === 0}">
                        <a class="btn btn-link"
                           ng-click="list_param.refund_status=0;getapi();">待退款</a>
                    </li>
                    <li role="presentation" ng-class="{active:list_param.refund_status === 3}">
                        <a class="btn btn-link"
                           ng-click="list_param.refund_status=3;getapi();">退款成功</a>
                    </li>
                    <li role="presentation" ng-class="{active:list_param.refund_status === 1}">
                        <a class="btn btn-link"
                           ng-click="list_param.refund_status=1;getapi();">退款中</a>
                    </li>
                    <li role="presentation" ng-class="{active:list_param.refund_status === 2}">
                        <a class="btn btn-link"
                           ng-click="list_param.refund_status=2;getapi();">退款失败</a>
                    </li>
                </ul>
            </div>
            <div class="panel">
                <ul class="nav nav-pills">
                    <li role="presentation">
                        <a class="btn">账户类别:</a>
                    </li>
                    <li role="presentation" ng-class="{active:list_param.refund_type === ''}">
                        <a class="btn btn-link"
                           ng-click="list_param.refund_type='';getapi();">不限</a>
                    </li>
                    <li role="presentation" ng-class="{active:list_param.refund_type === 1}">
                        <a class="btn btn-link"
                           ng-click="list_param.refund_type=1;getapi();">微信</a>
                    </li>
                    <li role="presentation" ng-class="{active:list_param.refund_type === 2}">
                        <a class="btn btn-link"
                           ng-click="list_param.refund_type=2;getapi();">支付宝</a>
                    </li>
                    <li role="presentation" ng-class="{active:list_param.refund_type === 3}">
                        <a class="btn btn-link"
                           ng-click="list_param.refund_type=3;getapi();">微信H5</a>
                    </li>
                </ul>
            </div>
            <div style="margin-top: 15px;">
                <a class="btn btn-danger" ng-click="order_refund();">确认退款</a>
                <a class="btn btn-info" ng-click="CheckAll();">全部选择</a>
                <a class="btn btn-info" ng-click="UnCheck();">取消全选</a>
            </div>
        </div>
        <div class="panel-body">
            <table class="table table-hover table-bordered">
                <thead>
                <th class="span100">订单序号</th>
                <th class="span150">订单编号</th>
                <th style="width: 10%;text-align: center;">活动名称</th>
                <th class="span150">联系人</th>
                <th style="width: 10%;text-align: center;">申请时间</th>
                <th class="span100">支付方式</th>
                <th style="width: 10%;text-align: center;">退款金额</th>
                <!--<th class="span120">确认退款者</th>-->
                <!--<th class="span120">当前状态</th>-->
                <th class="span100" ng-if="list_param.refund_status===1 || list_param.refund_status===3">
                    <!--<span class="ng-clock"-->
                    <!--ng-if="list_param.refund_status===0 || list_param.refund_status===2">操作</span>-->
                    <span class="ng-clock">退款时间</span>
                </th>
                <th class="span100">退款原因</th>
                <th class="span100">退款来源</th>
                </thead>
                <tbody>
                <tr bindonce ng-show="!refund.already_operation"
                    ng-repeat="refund in refund_list" ng-class="{'checked':refund.checked}"
                    ng-click="refund.checked = ((list_param.refund_type&&(list_param.refund_status==0||list_param.refund_status==2))?(!refund.checked):refund.checked)">
                    <td>
                        <p class="p150">
                            <label ng-if="list_param.refund_type&&(list_param.refund_status===0 || list_param.refund_status===2)">
                                <input type="checkbox" value="" ng-checked="refund.checked">
                                <span class="msg_title" bo-text="refund.order_id"></span>
                            </label>
                            <span class="msg_title" bo-text="refund.order_id"
                                  ng-if="!list_param.refund_type|| (list_param.refund_status==1||list_param.refund_status==3)"></span>
                        </p>
                    </td>
                    <td>
                        <span class="msg_title span150" bo-text="refund.order_no"></span>
                    </td>
                    <td>
                        <span class="msg_title" bo-text="refund.order.order_title"></span>
                    </td>
                    <td>
                        <p class="span150" ng-if="refund.order">
                            <span class="msg_title" bo-text="'联系人：'+refund.order.contact_name"></span><br>
                            <span class="msg_title" bo-text="'电话：'+refund.order.contact_mobile"></span><br>
                            <span class="msg_title" bo-text="'地址：'+refund.order.contact_address"></span><br>
                            <span class="msg_title" bo-text="'小区：'+refund.order.community_name"></span>
                        </p>
                    </td>
                    <td><span class="msg_title" bo-text="refund.created_at | null2empty"></span></td>
                    <td><span class="msg_title span100" bo-text="refund.refund_type | payment_from"></span></td>
                    <td><span class="msg_title" bo-text="refund.refund_price"></span></td>
                    <!--<td><span class="msg_title" bo-text="refund.contact_mobile"></span></td>-->
                    <!--<td><span class="msg_title" bo-text="refund.refund_status | refund_status"></span></td>-->
                    <td ng-if="list_param.refund_status===1 || list_param.refund_status===3">
                        <span class="msg_title ng-clock" bo-text="refund.verified_at"
                                ></span>
                        <!--<a class="btn btn-danger ng-clock"-->
                        <!--ng-click="update(refund.refund_id,refund.refund_price,2,$index)"-->
                        <!--ng-if="list_param.refund_status===0 || list_param.refund_status===2">确认退款</a>-->
                        <!--<a class="btn btn-warning ng-clock"-->
                        <!--ng-click="update(refund.refund_id,refund.refund_price,2,$index)"-->
                        <!--ng-if="list_param.refund_status==1">取消退款</a>-->
                    </td>
                    <td><span class="msg_title" bo-text="refund.cancel_reason"></span></td>
                    <td><span class="msg_title" bo-text="refund.cancel_from|cancel_from"></span></td>
                </tr>
                </tbody>
            </table>
            <div class="text-center" id="pagination">
                <pagination total-items="totalItems" ng-model="currentPage" items-per-page="itemsPerPage"
                            max-size="maxSize" class="pagination"
                            boundary-links="true" ng-change="getapi(currentPage)" items-per-page="10"
                            rotate="false" num-pages="numPages" previous-text="&lsaquo;" next-text="&rsaquo;"
                            first-text="&laquo;" last-text="&raquo;"></pagination>
            </div>
        </div>
        <div class="panel-body">
            <form action="refund_alipay_form.php" target="_blank" id="form1" method="post" style="display: none;">
                <textarea name="form_str" id="form_str" cols="30" rows="10"></textarea>
            </form>
        </div>
    </div>
</div>