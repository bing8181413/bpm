<style>
    #list>thead>tr>th{
        border-bottom: 0;
        text-align: center;
    }
    .img_a{
        display: inline-block;
        width: 50px;
        max-height: 50px;
        max-width: 30%;
        cursor:pointer;
        margin-right: 3px;
    }
    .img_a>img{
        width: 50px;
        height: 50px;
    }
    .big_pic{
        width: 500px;
        max-width: 100%;
        max-height: 100%;
    }
    .img_a.big_pic>img{
        width: auto;
        height: auto;
    }
    #pagination{
        position: fixed;
        bottom: 20px;
        right: 50px;
        background: #999;
        padding: 0 25px;
        opacity: 0.8;
        border-radius: 5px;
    }
    .address{
        color: #999;
        font-size: 12px;
    }
</style>
<script type="text/ng-template" id="update_wish.html">
    <div class="modal-header">
        <h3 class="modal-title">修改模板</h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-3 control-label">愿望名称<span class="form_label_dangus">*</span></label>
                <div class="col-sm-9">
                    <input class="form-control" id="title" ng-class="{'form_dangus':wish_detail.title}"
                           ng-change="wish_detail.title = 0" ng-model="wish_param.title"
                           placeholder="标题">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">活动类型<span class="form_label_dangus">*</span></label>
                <div class="col-sm-9">
                    <select class="form-control"  ng-options="activity_type for activity_type in pubdata.activity_type"
                            ng-model="wish_param.type"
                            ng-change="wish_detail.type = 0;" ng-class="{'form_dangus':wish_detail.type}" placeholder="活动类型">
                        <option value="">请选择活动类型</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">活动人数<span class="form_label_dangus">*</span></label>
                <div class="col-sm-9">
                    <input class="form-control" id="people_num"  ng-class="{'form_dangus':wish_detail.people_num}"
                           ng-change="wish_detail.people_num = 0;" ng-model="wish_param.people_num"
                           placeholder="活动人数">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">URL<span class="form_label_dangus">*</span></label>
                <div class="col-sm-9">
                    <input class="form-control" id="people_num"  ng-class="{'form_dangus':wish.url}"
                           ng-change="wish_detail.url = 0;" ng-model="wish_param.url"
                           placeholder="活动人数">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">封面图<span class="form_label_dangus">*</span></label>
                <div class="col-sm-9">
                    <input class="form-control" type="file" nv-file-select="" uploader="uploader" accept="image/*"  />
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-9 col-sm-offset-3 ">
                    <a class="btn btn-success" ng-click="uploader.uploadAll();closeAlert();">上传</a>
                    <a class="btn btn-danger"
                       ng-click="uploader.clearQueue();wish.image='';">删除</a>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-9 col-sm-offset-3">
                    <img class="img-responsive" ng-src="{{wish.image}}" ng-if="wish.image">
                </div>
            </div>
            <div class="form-group">
                <div class="home_dangus" ng-repeat="alert in alerts" ng-click="closeAlert($index)">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <strong>{{alert.msg}}</strong>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" ng-click="ok()">更新</button>
        <button class="btn btn-warning" ng-click="cancel()">关闭</button>
    </div>
</script>
<div class="container-fluid">
    <div class="panel panel-primary">
        <div class="panel-heading">模板管理</div>
        <div class="panel-body">
            <div class="panel">
                <div class="panel-heading">
                    <a class="btn btn-info" ng-click="$state.go('godlampArt');">添加模板</a>
                </div>
            </div>
        </div>
        <table id="list" class="table table-hover table-bordered">
            <thead>
            <tr>
                <th style="width: 5%;">模板ID</th>
                <th style="width: 10%;">模板名称</th>
                <th style="width: 5%;">模板类型</th>
                <th style="width: 15%;">模板被使用的次数</th>
                <th style="width: 10%;">创建时间</th>
                <th style="width: 10%;">状态</th>
                <th style="width: 15%;">操作</th>
            </tr>
            </thead>
            <tbody>
            <tr bindonce ng-repeat="wish in wish_list track by wish.activity_id"  ng-if="wish">
                <td class="text-center"><span bo-text="wish.activity_id"></span></td>
                <td class="text-center"><a class="btn btn-success"  ng-click="open_detail(wish.wish_id);" bo-text="wish.activity_title"></a></td>
                <td class="text-center"><span bo-text="wish.activity_type"></span></td>
                <td class="text-center"><span bo-text="wish.share_count"></span></td>
                <td class="text-center"><span bo-text="wish.created_at | null2empty | limitTo:10"></span></td>
                <td class="text-center"><span bo-text="wish.status"></span></td>
                <td>
                    <a class="btn btn-primary"  ng-click="update_wish(wish, $index);">更新</a>
                    <a ng-if="wish.status==2" class="btn btn-success"  ng-click="start_wish($index);">启用</a>
                    <a ng-if="wish.status==1" class="btn btn-danger" ng-click="del_wish($index);">停用</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="text-center" id="pagination">
        <pagination total-items="totalItems" ng-model="currentPage" max-size="maxSize" class="pagination" boundary-links="true" ng-change="getapi('wish_list',currentPage)"
                    rotate="false" num-pages="numPages" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
    </div>
</div>