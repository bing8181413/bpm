<script type="text/ng-template" id="add_thumbup.html">
    <div class="modal-header">
        <h3 class="modal-title">点赞</h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-3 control-label">负责人<span class="form_label_dangus">&nbsp;</span></label>

                <div class="col-sm-9">
                    <select class="form-control" ng-model="get_majia_list_param.account_id" ng-change="get_majia_list()"
                            ng-options="account.account_id as account.username for account in account_list |filter:{role:'majia'}">
                        <option value="" disabled="true">请选择负责人</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">小区<span class="form_label_dangus">&nbsp;</span></label>

                <div class="col-sm-9">
                    <input class="form-control" ng-model="get_majia_list_param.community_name"
                           ng-change="get_majia_list()">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">选择账号<span class="form_label_dangus">*</span></label>

                <div class="col-sm-9">
                    <select class="form-control" ng-model="add_thumbup.user_id"
                            ng-options="user.user_id as user.name for user in majias_list">
                        <option value="" disabled="true">请选择账号</option>
                    </select>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" ng-click="ok()">确定</button>
        <button class="btn btn-warning" ng-click="cancel()">关闭</button>
    </div>
</script>
<script type="text/ng-template" id="add_comment.html">
    <div class="modal-header">
        <h3 class="modal-title">回复</h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-3 control-label">负责人<span class="form_label_dangus">&nbsp;</span></label>

                <div class="col-sm-9">
                    <select class="form-control" ng-model="get_majia_list_param.account_id" ng-change="get_majia_list()"
                            ng-options="account.account_id as account.username for account in account_list |filter:{role:'majia'}">
                        <option value="" disabled="true">请选择负责人</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">小区<span class="form_label_dangus">&nbsp;</span></label>

                <div class="col-sm-9">
                    <input class="form-control" ng-model="get_majia_list_param.community_name"
                           ng-change="get_majia_list()">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">选择账号<span class="form_label_dangus">*</span></label>

                <div class="col-sm-9">
                    <select class="form-control" ng-model="add_comment.user_id"
                            ng-options="user.user_id as user.name for user in majias_list">
                        <option value="" disabled="true">请选择账号</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">回复对象<span class="form_label_dangus">*</span></label>

                <div class="col-sm-9">
                    <input class="form-control" ng-model="add_comment.reply_user_name" disabled="disabled"></input>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">回复内容<span class="form_label_dangus">*</span></label>

                <div class="col-sm-9">
                    <textarea class="form-control" rows="5" ng-model="add_comment.content"
                              placeholder="回复内容"></textarea>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" ng-click="ok()">确定</button>
        <button class="btn btn-warning" ng-click="cancel()">关闭</button>
    </div>
</script>
<script type="text/ng-template" id="thumbup_list.html">
    <div class="modal-header">
        <h3 class="modal-title">点赞列表</h3>
    </div>
    <div class="modal-body">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th class="info">ID</th>
                <th class="info">点赞者</th>
                <th class="info">来自小区</th>
                <th class="info">时间</th>
                <th class="info">头像</th>
            </tr>
            </thead>
            <tbody>
            <tr bindonce ng-repeat="thumbup in thumbup_list track by $index">
                <td><span bo-text="$index + 1"></span></td>
                <td><span bo-text="thumbup.user_id"></span></td>
                <td><span bo-text="thumbup.community_name"></span></td>
                <td><span bo-text="thumbup.created_at"></span></td>
                <td>
                    <div class="img_a" ng-class="{big_pic:thumbup.toggleclass}">
                        <img class="img-responsive" bo-src="thumbup.avatar">
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning" ng-click="cancel()">关闭</button>
    </div>
</script>
<script type="text/ng-template" id="comment_list.html">
    <div class="modal-header">
        <h3 class="modal-title">评论列表</h3>
    </div>
    <div class="modal-body">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th class="info">ID</th>
                <th class="info">评论人</th>
                <th class="info">来自小区</th>
                <th class="info">内容</th>
                <th class="info">时间</th>
                <th class="info">头像</th>
                <th class="info">回复对象</th>
                <th class="info">状态</th>
                <th class="info">操作</th>
            </tr>
            </thead>
            <tbody>
            <tr bindonce ng-repeat="comment in comment_list track by $index">
                <td><span bo-text="comment.fc_id"></span></td>
                <td><span bo-text="comment.post_name"></span></td>
                <td><span bo-text="comment.community_name"></span></td>
                <td><span bo-text="comment.content"></span></td>
                <td><span bo-text="comment.created_at"></span></td>
                <td>
                    <div class="img_a" ng-class="{big_pic:comment.toggleclass}">
                        <img class="img-responsive" bo-src="comment.avatar_url">
                    </div>
                </td>
                <td><span bo-text="comment.reply_to_name"></span></td>
                <td><span ng-bind="comment.status | feed_comment_status"></span></td>
                <td>
                    <a class="btn btn-primary"
                       ng-click="add_comment(comment.feed_id,comment.user_id,comment.post_name);">
                        回复
                    </a>
                    <a class="btn btn-danger" ng-if="comment.status == 1"
                       ng-click="commentstaus(comment.fc_id,2,$index);">
                        屏蔽
                    </a>
                    <a class="btn btn-success" ng-if="comment.status == 2"
                       ng-click="commentstaus(comment.fc_id,1,$index);">
                        恢复
                    </a>
                </td>
            </tr>
        </table>
    </div>
    <div class="modal-footer">
        <!--<button class="btn btn-primary" ng-click="ok()">OK</button>-->
        <button class="btn btn-warning" ng-click="cancel()">关闭</button>
    </div>
</script>
<div class="container-fluid">
    <div class="panel panel-primary">
        <!-- Default panel contents -->
        <div class="panel-heading">帖子列表</div>
        <div class="panel-body">
            <ul class="nav nav-pills">
                <li role="presentation" ng-class="{active:tab ==1}">
                    <a class="btn" ng-click="tab=1;list_param.is_popular=0;getapi(1,1);">发布的动态</a>
                </li>
                <li role="presentation" ng-class="{active:tab ==3}">
                    <a class="btn" ng-click="tab=3;list_param.is_popular=0;getapi(1,3);">已屏蔽的动态</a>
                </li>
                <li role="presentation" ng-class="{active:tab ==2}">
                    <a class="btn" ng-click="tab=2;list_param.is_popular=0;getapi(1,2);">已删除的动态</a>
                </li>
                <li role="presentation" ng-class="{active:tab ==4}">
                    <a class="btn" ng-click="tab=4;list_param.is_popular=1;getapi(1,1);">标记为热门的动态</a>
                </li>
            </ul>
        </div>
        <div class="panel-body " ng-keypress="searchkeyword($event);">
            <div class="panel">
                <ul class="nav nav-pills">
                    <li role="presentation">
                        <a class="btn">小区(ID也可以):</a>
                    </li>
                    <li role="presentation">
                        <input class="form-control" type="text" ng-model="list_param.community_name">
                    </li>
                    <li role="presentation">
                        <a class="btn">话题名称:</a>
                    </li>
                    <li role="presentation">
                        <input class="form-control" type="text" ng-model="list_param.topic_name">
                    </li>
                    <li role="presentation">
                        <a class="btn">发布人:</a>
                    </li>
                    <li role="presentation">
                        <select class="form-control" ng-model="get_majia_list_param.account_id"
                                ng-change="get_majia_list()"
                                ng-options="account.account_id as account.username for account in account_list |filter:{role:'majia'}">
                            <option value="" disabled="true">负责人</option>
                        </select>
                    </li>
                    <li role="presentation">
                        <select class="form-control" ng-model="list_param.post_name" ng-change="getapi(1);"
                                ng-options="user.user_id as user.name for user in majias_list">
                            <option value="" disabled="true">请选择账号</option>
                        </select>
                    </li>
                </ul>
            </div>
            <div class="panel">
                <div class="panel-heading">
                    <a class="btn btn-info" ng-click="$state.go('listmajiaadd');">新增帖子</a>
                </div>
            </div>
        </div>
        <div class="panel-body">
            <table id="list" class="table table-hover table-bordered">
                <thead>
                <tr>
                    <th style="width: 50px;">动态ID</th>
                    <th style="width: 50px;">发布者</th>
                    <th style="width: 50px;">来自小区</th>
                    <th style="width: 50px;">类型</th>
                    <th style="width: 100px;">内容</th>
                    <th style="width: 100px;">图片</th>
                    <th style="width: 100px;">时间</th>
                    <th style="width: 50px;">点赞数</th>
                    <th style="width: 50px;">评论数</th>
                    <th style="width: 100px;" ng-if="tab==1 || tab==2|| tab==3">操作</th>
                    <th style="width: 50px;" ng-show="tab==4">热门</th>
                </tr>
                </thead>
                <tbody>
                <tr bindonce ng-repeat="feed in Feeds">
                    <td><span ng-bind="feed.feed_id"></span></td>
                    <td><span bo-text="feed.post_user_info.name"></span></td>
                    <td><span bo-text="feed.community_info.name"></span></td>
                    <td><span bo-text="feed.category_names"></span></td>
                    <td><span bo-text="feed.content"></span></td>
                    <td>
                        <show_image url="feed.pics[0].pic_url"></show_image>
                    </td>
                    <td><span bo-text="feed.created_at"></span></td>
                    <td>
                        <a class="btn btn-primary" ng-click="thumbup_list(feed.thumbup_list);">
                            <span ng-bind="feed.thumbup_count"></span>
                        </a>
                    </td>
                    <td>
                        <a class="btn btn-primary" ng-click="comment_list(feed.comment_list,$index);">
                            <span ng-bind="feed.comment_count"></span>
                        </a>
                    </td>
                    <td ng-if="tab==1 ||tab==2 ||tab==3">
                        <a class="btn btn-primary" ng-click="add_thumbup(feed.feed_id);">点赞</a>
                        <a class="btn btn-primary" ng-click="add_comment(feed.feed_id);">评论</a>

                        <div>
                            <a class="btn btn-success" ng-if="tab==1 && feed.is_popular ==0"
                               ng-click="feedpopular(feed.feed_id,1,$index);">热门</a>
                            <a class="btn btn-danger" ng-if="tab==1"
                               ng-click="feedstatus(feed.feed_id, 3, $index);">屏蔽</a>
                            <a class="btn btn-success" ng-if="tab==2 || tab==3"
                               ng-click="feedstatus(feed.feed_id, 1, $index);">恢复</a>
                        </div>
                    </td>
                    <td ng-show="tab==4">
                        <a class="btn btn-danger" ng-click="feedpopular(feed.feed_id,0,$index);">取消热门</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="text-center" id="pagination">
        <pagination total-items="totalItems" ng-model="currentPage" max-size="maxSize" class="pagination"
                    boundary-links="true" ng-change="getapi(currentPage)"
                    rotate="false" num-pages="numPages" previous-text="&lsaquo;" next-text="&rsaquo;"
                    first-text="&laquo;" last-text="&raquo;"></pagination>
    </div>
</div>