<div class="dashboard-page ">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title" ng-if="!$stateParams.id">新增课程</h3>
            <h3 class="panel-title" ng-if="$stateParams.id">更新课程</h3>
        </div>
        <div class="panel-body">
            <form class="form-horizontal" name="FormBody" novalidate>
                <div class="panel panel-primary">
                    <div class="panel-body">
                        <div form-input text="标题" ng-model="param.title"
                             required="true" placeholder="课程名称,不超过30个字" minlength="1" maxlength="30"></div>

                        <div form-input text="排序" ng-model="param.order_by" placeholder="数字:1,2,3,4,5" required="true"></div>

                        <div form-input text="课程价格" ng-model="param.price" required="true"></div>

                        <div form-input text="课程预览地址URL" ng-model="param.preview" required="true"></div>

                        <div form-image-single text="图片" ng-model="param.image" required="true"></div>

                        <div form-search text="添加房间/视频ID" verify="verify_room(room_id)" btn-text="查询并添加房间/视频ID"
                             ajax-config="{method:'get',url:$root.common.domain+'/mobile/live/rooms/'+room_id}"
                             ng-model="room_id" callback="add_room(json)"></div>
                        <div class="form-group" style="outline: none;">
                            <label class="col-sm-2 control-label">章节&nbsp;&nbsp;</label>
                            <div class="col-sm-8">
                            <table class="table table-bordered table-striped">
                                <tbody>
                                <tr bindonce ng-repeat="(key,item) in chapters">
                                    <td style="width: 50px">
                                        <span ng-bind="'第 '+ key+' 行'" class="label-success label"></span>
                                    </td>
                                    <td>
                                        <div ng-include="'app/scripts/views/third/courses/room.html'"></div>
                                    </td>
                                    <td style="width: 50px">
                                        <a class="btn btn-primary btn-xs btn-bordered pull-right"
                                           ng-click="change_row(item.type,key)">改变行</a>
                                    </td>
                                    <td style="width: 50px">
                                        <a class="btn btn-danger btn-xs btn-bordered pull-right"
                                           ng-click="chapters.splice($index, 1)">删除</a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            </json-table>
                        </div>
                        </div>
                    <div form-textarea text="描述" ng-model="param.desc" placeholder="不超过15字"></div>
                </div>
                <div form-error-block></div>
                <a class="btn btn-success btn-rounded" ng-disabled="FormBody.$invalid" ng-click="submit()">提交</a>
            </form>
        </div>
    </div>
</div>